#!/bin/sh
# Knowledge Engine Auto-Learning Hook
# This hook automatically learns from your code changes

echo "ðŸ§  Knowledge Engine: Analyzing your changes..."

# Get list of staged files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|js|py|java|cs|go|rs|cpp|c|rb|php)$')

if [ -n "$STAGED_FILES" ]; then
  # Trigger Knowledge Engine analysis
  code --command knoEng.ai.analyzeCode 2>/dev/null || true
  
  # Learn patterns from staged files
  for FILE in $STAGED_FILES; do
    echo "  Learning from: $FILE"
    code --command knoEng.ai.learnPattern --args "$FILE" 2>/dev/null || true
  done
  
  # Check for potential issues
  code --command knoEng.ai.suggestFix 2>/dev/null || true
fi

# Always succeed - we don't want to block commits
exit 0
